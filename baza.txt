CREATE TABLE ucitelji (
    ID                INTEGER        PRIMARY KEY AUTOINCREMENT,
    Ime               VARCHAR (50)   NOT NULL,
    Priimek           VARCHAR (50)   NOT NULL,
    Eposta            VARCHAR (100)  NOT NULL,
    Cena              DECIMAL (5, 2) NOT NULL,
    ID_uporabnika     INTEGER        NOT NULL,
    FOREIGN KEY (ID_uporabnika) REFERENCES uporabniki(ID)
);

CREATE TABLE ucenci (
    ID                INTEGER        PRIMARY KEY AUTOINCREMENT,
    Ime               VARCHAR (50)   NOT NULL,
    Priimek           VARCHAR (50)   NOT NULL,
    Eposta            VARCHAR (100)  NOT NULL,
    ID_uporabnika     INTEGER        NOT NULL,
    FOREIGN KEY (ID_uporabnika) REFERENCES uporabniki(ID)
);

CREATE TABLE uporabniki (
    ID                INTEGER        PRIMARY KEY AUTOINCREMENT,
    Uporabnisko_ime   VARCHAR (100)   NOT NULL UNIQUE,
    Geslo             VARCHAR (100)  NOT NULL,
    Vrsta             INTEGER        NOT NULL CHECK(Vrsta IN (0, 1, 2)) -- 0 za učence, 1 za učitelje, 2 za admin
);

CREATE TABLE predmeti (
    ID           INTEGER       PRIMARY KEY AUTOINCREMENT,
    Ime_predmeta VARCHAR (100) NOT NULL
);

CREATE TABLE instrukcije (
    ID INTEGER PRIMARY KEY AUTOINCREMENT,
    Datum DATE NOT NULL,
    Cas TIME NOT NULL,
    Trajanje INTEGER NOT NULL, -- trajanje v minutah
    Status TEXT NOT NULL CHECK(Status IN ('rezervirano', 'opravljeno', 'preklicano')),
    ID_ucitelja INTEGER NOT NULL,
    ID_ucenca INTEGER NOT NULL,
    FOREIGN KEY (ID_ucitelja) REFERENCES Ucitelji(ID),
    FOREIGN KEY (ID_ucenca) REFERENCES Ucenci(ID)
);

CREATE TABLE uciteljiPredmeti (
    ID_ucitelja INTEGER NOT NULL,
    ID_predmeta INTEGER NOT NULL,
    PRIMARY KEY (ID_ucitelja, ID_predmeta),
    FOREIGN KEY (ID_ucitelja) REFERENCES Ucitelji(ID),
    FOREIGN KEY (ID_predmeta) REFERENCES Predmeti(ID)
);